# Record all AI tools and prompts that you used to create substantial amounts of code.
app.put('/api/courses/:courseTitle/:courseCode/:courseSection', (req, res) => {
    try {
        const title = decodeURIComponent(req.params.courseTitle);
        const code = decodeURIComponent(req.params.courseCode);
        const section = decodeURIComponent(req.params.courseSection);

        const courses = JSON.parse(fs.readFileSync(courseFile, 'utf-8') || '[]');

        const index = courses.findIndex(c =>
            c.courseTitle === title &&
            c.courseCode === code &&
            c.courseSection === section
        );

        if (index === -1) return res.status(404).json({ message: "Course not found "});

        const patch = {};
        const body = req.body || {};
        if (typeof body.courseTitle === 'string' && body.courseTitle.trim() !== '')   patch.courseTitle   = body.courseTitle.trim();
        if (typeof body.courseCode === 'string' && body.courseCode.trim() !== '')     patch.courseCode    = body.courseCode.trim();
        if (typeof body.courseSection === 'string' && body.courseSection.trim() !== '') patch.courseSection = body.courseSection.trim();

        courses[index] = { ...courses[index], ...patch };
        fs.writeFileSync(courseFile, JSON.stringify(courses, null, 2));
        res.json(courses[index]);
    } catch (err) {
        console.log(err);
        res.status(500).json({ message: "Failed to update Course" })
    }
});